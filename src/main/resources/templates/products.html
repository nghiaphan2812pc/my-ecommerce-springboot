<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<!-- Mirrored from themepure.net/template/outstock-prv/outstock/shop.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Aug 2021 13:07:36 GMT -->

<head>
  <meta charset="utf-8">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>Outstock - Clean, Minimal eCommerce HTML5 Template </title>
  <meta name="description" content="">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Place favicon.ico in the root directory -->
  <link rel="shortcut icon" type="image/x-icon" href="../img/favicon.png">

  <!-- CSS here -->
  <link rel="stylesheet" th:href="@{/css/preloader.css}">
  <link rel="stylesheet" th:href="@{/css/bootstrap.min.css}">
  <link rel="stylesheet" th:href="@{/css/slick.css}">
  <link rel="stylesheet" th:href="@{/css/metisMenu.css}">
  <link rel="stylesheet" th:href="@{/css/owl.carousel.min.css}">
  <link rel="stylesheet" th:href="@{/css/animate.min.css}">
  <link rel="stylesheet" th:href="@{/css/ui-range-slider.css}">
  <link rel="stylesheet" th:href="@{/css/jquery.fancybox.min.css}">
  <link rel="stylesheet" th:href="@{/css/fontAwesome5Pro.css}">
  <link rel="stylesheet" th:href="@{/css/ionicons.min.css}">
  <link rel="stylesheet" th:href="@{/css/default.css}">
  <link rel="stylesheet" th:href="@{/css/style.css}">
</head>

<body>
  <!--[if lte IE 9]>
            <p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience and security.</p>
        <![endif]-->

  <!-- Add your site or application content here -->

  <!-- prealoder area start -->
  <div id="loading">
    <div id="loading-center">
      <div id="loading-center-absolute">
        <div class="object" id="first_object"></div>
        <div class="object" id="second_object"></div>
        <div class="object" id="third_object"></div>
      </div>
    </div>
  </div>
  <!-- prealoder area end -->

  <!-- header area start -->
  <header th:replace="fragments/header :: header"></header>
  <!-- header area end -->

  <!-- scroll up area start -->
  <div class="scroll-up" id="scroll" style="display: none;">
    <a href="javascript:void(0);"><i class="fas fa-level-up-alt"></i></a>
  </div>
  <!-- scroll up area end -->

  <!-- search area start -->
  <section th:replace="fragments/search :: search"></section>
  <div id="overlay1" class="body-overlay transition-3"></div>
  <!-- search area end -->

  <!-- extra info area start -->
  <section class="extra__info transition-3">
    <div class="extra__info-inner">
      <div class="extra__info-close text-right">
        <a href="javascript:void(0);" class="extra__info-close-btn"><i class="fal fa-times"></i></a>
      </div>
      <!-- side-mobile-menu start -->
      <nav th:replace="fragments/sideMobileMenu:: sideMobileMenu"></nav>
      <!-- side-mobile-menu end -->
    </div>
  </section>
  <div id="overlay2" class="body-overlay transition-3"></div>
  <!-- extra info area end -->

  <main>

    <!-- page title area start -->
    <section class="page__title p-relative d-flex align-items-center" data-background="../img/page-title/page-title-7.jpg">
      <div class="container">
        <div class="row">
          <div class="col-xl-12">
            <div class="page__title-inner text-center">
              <h1 style="color:white">Shop</h1>
              <div class="page__title-breadcrumb">
                <nav aria-label="breadcrumb">
                  <ol class="breadcrumb justify-content-center">
                    <li class="breadcrumb-item" style="color:white"><a href="index.html">Home</a></li>
                    <li class="breadcrumb-item active" style="color:white" aria-current="page"> Shop</li>
                  </ol>
                </nav>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- page title area end -->

    <!-- shop area start -->
    <section class="shop__area pt-100 pb-100">
      <div class="container">
        <div class="row">
          <div class="col-xl-3 col-lg-3 col-md-4">
            <div class="shop__sidebar">
              <div class="sidebar__widget mb-55">
                <div class="sidebar__widget-title mb-25">
                  <h3>Product Categories</h3>
                </div>
                <div class="sidebar__widget-content">
                  <div class="categories">
                    <div id="brand-list">
                    </div>
                  </div>
                </div>
              </div>
              <div class="sidebar__widget mb-55">
                <div class="sidebar__widget-title mb-30">
                  <h3>Filter By Price</h3>
                </div>
                <div class="sidebar__widget-content">
                  <div class="price__slider">
                    <div id="slider-range"></div>
                    <div>
                      <form action="#">
                        <button onclick="updateFilter()" type="button">Filter</button>
                        <br>
                        <label for="amount">Price</label>
                        <br>
                        <input style="width: 100%;" type="text" id="amount" readonly>
                      </form>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-9 col-lg-9 col-md-8">
            <div class="shop__content-area">
              <div class="shop__header d-sm-flex justify-content-between align-items-center mb-40">
                <div class="shop__header-left">
                  <div class="show-text">
                    <span></span>
                  </div>
                </div>
                <div class="shop__header-right d-flex align-items-center justify-content-between justify-content-sm-end">
                  <ul class="nav nav-pills" id="pills-tab" role="tablist">
                    <li class="nav-item">
                      <a class="nav-link active" id="pills-grid-tab" data-toggle="pill" href="#pills-grid" role="tab" aria-controls="pills-grid" aria-selected="true"><i class="fas fa-th"></i></a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link" id="pills-list-tab" data-toggle="pill" href="#pills-list" role="tab" aria-controls="pills-list" aria-selected="false"><i class="fas fa-list-ul"></i></a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="tab-content" id="pills-tabContent">
                <div class="tab-pane fade show active" id="pills-grid" role="tabpanel" aria-labelledby="pd-
                ills-grid-tab">
                  <div class="row custom-row-10" id="grid-list-product">
                  </div>
                </div>
                <div class="tab-pane fade" id="pills-list" role="tabpanel" aria-labelledby="pills-list-tab">
                </div>
              </div>
              <div class="row mt-40">
                <div class="col-xl-12">
                  <div class="shop-pagination-wrapper d-md-flex justify-content-between align-items-center">
                    <div class="basic-pagination">
                      <ul id="page-button">
                      </ul>
                    </div>
                    <div class="shop__header-left">
                      <div class="show-text bottom">
                        <span></span>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
    <!-- shop area end -->
  </main>

  <!-- footer area start -->
  <section th:replace="fragments/footer :: footer"></section>
  <!-- footer area end -->

  <!-- JS here -->
  <script th:src="@{/js/vendor/modernizr-3.5.0.min.js}"></script>
  <script th:src="@{/js/vendor/jquery-3.5.1.min.js}"></script>
  <!--  <script th:src="@{/js/vendor/waypoints.min.js}"></script>-->
  <script th:src="@{/js/bootstrap.bundle.min.js}"></script>
  <script th:src="@{/js/metisMenu.min.js}"></script>
  <script th:src="@{/js/slick.min.js}"></script>
  <script th:src="@{/js/jquery.fancybox.min.js}"></script>
  <script th:src="@{/js/isotope.pkgd.min.js}"></script>
  <script th:src="@{/js/owl.carousel.min.js}"></script>
  <script th:src="@{/js/jquery-ui-slider-range.js}"></script>
  <script th:src="@{/js/ajax-form.js}"></script>
  <script th:src="@{/js/wow.min.js}"></script>
  <script th:src="@{/js/imagesloaded.pkgd.min.js}"></script>
  <script th:src="@{/js/main.js}"></script>

  <script>
    var brandID = 0;
    var minPrice = 0;
    var maxPrice = 0;
    var defaultProductNumberPerPage = 12;
    var productNumberPerPage = 12;
    var totalPageNumber = 1;
    var currentPage = 1;
    var key = null;
    const queryString = window.location.search;
    const urlParams = new URLSearchParams(queryString);
    key = urlParams.get('key');
    getBrandList();
    if(key != null) search();
    else getProductList();
    function getBrandList(){
      $.ajax({
        url: preUrl + "/getBrandList",
        type: "GET",
        success: function (response){
          console.log(response);
          renderBrandList(response.data)
        }
      });
    }
    function renderBrandList(brandList){
      $('#brand-list').empty();
      let style = "";
      if(brandID == 0) style = 'style="color: #bc8246;"';
      $('#brand-list').append(`<div class="card">
                      <div class="card-header white-bg">
                        <h5 class="mb-0">
                          <button ${style} class="shop-accordion-btn collapsed" onclick="updateBrand(0)" type="button">
                          All products
                          </button>
                        </h5>
                      </div>
                    </div>`);
      for(let i = 0; i< brandList.length; i++){
        let style = "";
        if(brandID == brandList[i].id) style = 'style="color: #bc8246;"';
        $('#brand-list').append(`<div class="card">
                        <div class="card-header white-bg">
                          <h5 class="mb-0">
                            <button ${style} class="shop-accordion-btn collapsed" onclick="updateBrand(${brandList[i].id})" type="button">
                            ${brandList[i].name}
                            </button>
                          </h5>
                        </div>
                      </div>`);
      }
    }
    function getProductList(){
      key = null;
      let request = {
        brandID : brandID,
        minPrice: minPrice,
        maxPrice: maxPrice,
        productNumberPerPage: productNumberPerPage,
        pageNumber: currentPage
      }
      $("#loading").css("display", "block");
      $.ajax({
        url: preUrl + "/getProductList",
        type: "post",
        data: JSON.stringify(request),
        contentType: "application/json",
        success: function (response){
          console.log(response);
          if(response.code == 200){
            totalPageNumber = response.data.totalPageNumber;
            renderPageButton(currentPage, totalPageNumber);
            renderListProduct(response.data.listProduct);
          }
          $("#loading").css("display", "none");
        }
      });
    }
    function renderPageButton(currentPage, totalPage){
      $("#page-button").empty();
      for(let i = 1; i<= totalPage; i++){
        let j = i;
        if(i == currentPage){
          if(j <= 9) j = "0" + i;
          $("#page-button").append('<li class="active"><a type="button" onclick="updatePage('+i+ ')">'+ j + '</a></li>');
        }
        else {
          if(j <= 9) j = "0" + i;
          $("#page-button").append('<li class=""><a type="button" onclick="updatePage('+i+ ')">' + j + '</a></li>');
        }
      }
    }
    function renderListProduct(listProduct){
      $("#grid-list-product").empty();
      $("#pills-list").empty();
      listProduct.map(item =>{
        let alter = 0;
        if(item.imageList.length >=2) alter = 1;
        $("#grid-list-product").append('<div class="col-xl-4 col-lg-4 col-md-6 col-sm-6 custom-col-10">\n' +
                '                      <div class="product__wrapper mb-60">\n' +
                '                        <div class="product__thumb">\n' +
                '                          <a href="/productDetail?id='+ item.id +'" class="w-img">\n' +
                '                            <img src="../img/'+ item.imageList[0].image + '" alt="product-img">\n' +
                '                            <img class="product__thumb-2" src="../img/'+ item.imageList[alter].image + '" alt="product-img">\n' +
                '                          </a>\n' +
                '                          <div class="product__sale">\n' +
                '                            <span class="new">new</span>\n' +
                '                            <span class="percent">-16%</span>\n' +
                '                          </div>\n' +
                '                        </div>\n' +
                '                        <div class="product__content p-relative">\n' +
                '                          <div class="product__content-inner">\n' +
                '                            <h4><a href="/productDetail?id='+ item.id +'">'+ item.name + '</a></h4>\n' +
                '                            <div class="product__price transition-3">\n' +
                '                              <span>'+moneyFormat.format(item.price)+'</span>\n' +
                '                            </div>\n' +
                '                          </div>\n' +
                '                          <div class="add-cart p-absolute transition-3">\n' +
                '                            <a type="button" onclick="addProductToCart('+ item.id + ')">+ Add to Cart</a>\n' +
                '                          </div>\n' +
                '                        </div>\n' +
                '                      </div>\n' +
                '                    </div>');
        $("#pills-list").append('<div class="product__wrapper mb-40">\n' +
                '                    <div class="row">\n' +
                '                      <div class="col-xl-4 col-lg-4">\n' +
                '                        <div class="product__thumb">\n' +
                '                          <a href="product-details.html" class="w-img">\n' +
                '                            <img src="../img/'+ item.imageList[0].image + '" alt="product-img">\n' +
                '                            <img class="product__thumb-2" src="../img/'+ item.imageList[alter].image + '" alt="product-img">\n' +
                '                          </a>\n' +
                '                          <div class="product__sale ">\n' +
                '                            <span class="new">new</span>\n' +
                '                            <span class="percent">-16%</span>\n' +
                '                          </div>\n' +
                '                        </div>\n' +
                '                      </div>\n' +
                '                      <div class="col-xl-8 col-lg-8">\n' +
                '                        <div class="product__content p-relative">\n' +
                '                          <div class="product__content-inner list">\n' +
                '                            <h4><a href="product-details.html">'+ item.name + '</a></h4>\n' +
                '                            <div class="product__price-2 mb-10">\n' +
                '                              <span>'+moneyFormat.format(item.price)+'</span>\n' +
                '                            </div>\n' +
                '                            <p>'+ item.description + '</p>\n' +
                '                            <div class="product__list mb-30">\n' +
                '                            </div>\n' +
                '                          </div>\n' +
                '                          <div class="add-cart-list d-sm-flex align-items-center">\n' +
                '                            <a type="button" onclick="addProductToCart('+ item.id + ')" class="add-cart-btn mr-10">+ Add to Cart</a>\n' +
                '                          </div>\n' +
                '                          <!-- shop modal start -->\n' +
                '                        </div>\n' +
                '                      </div>\n' +
                '                    </div>\n' +
                '                  </div>');
    });

    }
    function updatePage(page){
      productNumberPerPage = defaultProductNumberPerPage;
      currentPage = page;
      getProductList();
    }
    function updateBrand(id){
      getBrandList();
      productNumberPerPage = defaultProductNumberPerPage;
      currentPage = 1;
      brandID = id;
      getProductList();
    }
    function getMinPriceAndMaxPrice(){
      let filterValue = $("#amount").val();
      let arr = filterValue.split("-");
      minPrice = parseInt(arr[0]) * 1000000;
      maxPrice = parseInt(arr[1].split(" ")[0]) * 1000000;
    }
    function updateFilter(){
      productNumberPerPage = defaultProductNumberPerPage;
      currentPage = 1;
      getMinPriceAndMaxPrice();
      getProductList();
    }
    function addProductToCart(productID){
      if(userID == null){
        window.location.replace(preUrl + "/login");
      }
      else {
        let request = {
          userID: userID,
          productID: productID,
          quantity: 1
        }
        $.ajax({
          url: preUrl + "/addProductToCart",
          type: "POST",
          data: JSON.stringify(request),
          contentType: "application/json",
          success: function (response){
            console.log(response);
            if(response.code == 200){
              window.location.replace(preUrl + "/cart");
            }
          }
        });
      }
    }
    function search() {
      $.ajax({
        url: preUrl + "/searchProduct/" + key,
        type: "get",
        success: function (response) {
          productNumberPerPage = 1000000;
          renderListProduct(response.data.listProduct);
        }
      });
    }
  </script>
</body>

<!-- Mirrored from themepure.net/template/outstock-prv/outstock/shop.html by HTTrack Website Copier/3.x [XR&CO'2014], Thu, 05 Aug 2021 13:07:38 GMT -->

</html>
